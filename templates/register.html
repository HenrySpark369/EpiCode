<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro de Usuario</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/shared.css') }}" />
</head>
<body>

  <h1>Registro de Usuario</h1>

  {# Flash messages display block #}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, msg in messages %}
        <div class="flash {{ category }}">{{ msg }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

    <form method="post" action="{{ url_for('auth.register') }}"> {# Explicitly set action #}
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <label for="username">Usuario:</label>
      <input type="text" name="username" id="username" placeholder="Tu nombre de usuario" required />

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" placeholder="tu_correo@ejemplo.com" required />

    <label for="password">Contraseña:</label>
    <input type="password" name="password" id="password" placeholder="Tu contraseña" required />

    <label for="confirm_password">Confirmar Contraseña:</label>
    <input type="password" name="confirm_password" id="confirm_password" placeholder="Repite tu contraseña" required />

    <button type="submit" class="btn">Registrarse</button>
  </form>

  <p>
    ¿Ya tienes cuenta?
    <a href="{{ url_for('auth.login') }}" class="link-btn">Iniciar Sesión</a> {# Corrected endpoint #}
  </p>

  <button id="themeToggle" type="button" class="btn btn-sm btn-secondary mt-3 w-100">
    Cambiar tema
  </button>


  <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
